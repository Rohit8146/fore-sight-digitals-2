import React, { useEffect, useRef } from "react";
import { gsap } from "gsap";

export default function Loader() {
  const svgRef = useRef(null);

  useEffect(() => {
    const paths = svgRef.current.querySelectorAll("path");

    // Prepare each path
    paths.forEach((path) => {
      const length = path.getTotalLength();
      gsap.set(path, {
        strokeDasharray: length,
        strokeDashoffset: length,
      });
    });

    // Animate all paths together
    gsap.to(paths, {
      strokeDashoffset: 0,
      duration: 5,
      ease: "linear",
      stagger: 0,
    });

    // Fade out loader after animation
    gsap.to(".loader", {
      opacity: 0,
      transform: "translateY(-100%)",
      delay: 6,
      duration: 2,
    });
  }, []);

  return (
    <div className="loader relative z-[9999999] flex justify-center items-center h-screen bg-black">
      <svg
        ref={svgRef}
        width="1000"
        height="400"
        viewBox="0 0 321 75"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M34.5001 55.3346V18.3346C34.6668 12.3346 38.6001 0.534606 53.0001 1.3346C57.8334 1.16817 67.6001 3.93524 68.0001 16.3349V56.5688C68.0001 62.1575 64.8001 73.3349 52.0001 73.3349C46.0001 73.8347 34.1001 70.9343 34.5001 55.3346ZM45.5001 18.3346V55.3346C45.9001 61.7343 49.3334 63.3347 51.0001 63.3349C56.6001 63.7349 57.3334 58.168 57.0001 55.3346V18.3346C57.0001 12.7343 54.0001 11.3347 52.5001 11.3349C46.5001 10.5352 45.3334 15.6681 45.5001 18.3346Z"
          stroke="white"
        />
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M75.5 72.335V2.33496H94C98.6667 2.66841 108 6.13532 108 17.3353C108.167 22.8353 107 34.4353 101 36.8353C103.333 37.502 108 40.9353 108 49.3353V65.3353C108 67.1684 108.3 71.1347 109.5 72.335H98C97.6667 71.6684 97 69.4353 97 65.8353V46.8353C96.6667 44.502 94.1 40.3353 86.5 42.3353V72.335H75.5ZM86.5 12.3353V32.3353C94.5 32.7353 96.8333 27.8353 97 25.3353C98.6 16.1353 95 12.8353 93 12.3353H86.5Z"
          stroke="white"
        />
        <path
          d="M172 21.8352C172 22.2352 179 22.0019 182.5 21.8352V14.3352C182.167 8.83502 177.1 -1.26538 159.5 2.3349C154.333 3.83502 145.7 11.3352 152.5 29.3352C154.5 32.6686 160.4 40.6352 168 45.8352C170.167 48.8352 173.7 56.1352 170.5 61.3352C169 62.5906 165 64.2481 161 60.8352C160.5 60.3352 159.6 57.8352 160 51.8352H150V59.3352C150.333 64.0019 154 73.3352 166 73.3352C170.667 73.6686 180.5 71.2352 182.5 58.8352C183 54.3352 182.3 43.8352 175.5 37.8352C170.167 33.8352 159.8 24.4352 161 18.8352C161 18.3349 159.5 12.3352 165.5 11.3352C167.333 11.0019 171.2 11.4352 172 15.8352V21.8352Z"
          stroke="white"
        />
        <path
          d="M145 3.00002H115V73H145V63H126V41.5H141V31.5H126V13H145V3.00002Z"
          stroke="white"
        />
        <path d="M189 2.33496V72.3349H200V2.33496H189Z" stroke="white" />
        <path
          d="M230 42.8354H225V32.8354H241V54.8354C240.667 62.0021 236.4 75.7354 222 73.3354C217.167 73.1688 207.6 69.2354 208 54.8354V15.8354C208.667 10.0021 213.4 -1.06457 227 1.33543C232.167 1.66861 242.2 6.83496 241 24.835H230V15.8354C229.833 14.1686 228.2 11.035 223 11.835C221.167 12.0016 217.7 13.835 218.5 19.835V57.335C218.667 60.0015 220.3 64.9346 225.5 63.335C226.667 63.3353 229.2 62.4358 230 58.8354V42.8354Z"
          stroke="white"
        />
        <path
          d="M247.5 2.33496V72.3349H258.5V40.8349H270V72.3349H281.5V2.33496H270.5V30.3345H259L258.5 2.33496H247.5Z"
          stroke="white"
        />
        <path
          d="M287 2.33496V12.3345H298V72.3349H309.5V12.3345H320.5V2.33496H287Z"
          stroke="white"
        />
        <path
          d="M30 2.33496H1V72.335H12V41.835H26V31.835H12V12.335H30V2.33496Z"
          stroke="white"
        />
      </svg>
    </div>
  );
}
